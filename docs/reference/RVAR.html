<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimate regime-dependent VAR, SVAR, or Proxy-SVAR — RVAR • sovereign</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Estimate regime-dependent VAR, SVAR, or Proxy-SVAR — RVAR" />
<meta property="og:description" content="Estimate a regime-dependent VAR (i.e. a state-dependent VAR), with an exogenous state indicator, of the specification:
$$Y_{t+1} = X_t \beta_{s_t} + \epsilon_t$$
where t is the time index, Y is the set of outcome vectors, X the design matrix (of p lagged values of Y), and
s is a mutually exclusive state of the world observed at time t. When the regime vector is not supplied by the user, then a two-state
regime series is estimated via random forest." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7Z8WPQX0E6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7Z8WPQX0E6');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sovereign</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href=".././index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
<li>
  <a href=".././reference/index.html">
    <span class="fas fa-cog"></span>
     
    Tools
  </a>
</li>
<li>
  <a href=".././articles/getting_started.html">
    <span class="fas fa-cogs"></span>
     
    Workflow
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/tylerJPike/sovereign/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate regime-dependent VAR, SVAR, or Proxy-SVAR</h1>
    <small class="dont-index">Source: <a href='https://github.com/tylerJPike/sovereign/blob/master/R/var.R'><code>R/var.R</code></a></small>
    <div class="hidden name"><code>RVAR.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Estimate a regime-dependent VAR (i.e. a state-dependent VAR), with an exogenous state indicator, of the specification:
$$Y_{t+1} = X_t \beta_{s_t} + \epsilon_t$$
where <em>t</em> is the time index, <em>Y</em> is the set of outcome vectors, <em>X</em> the design matrix (of <em>p</em> lagged values of Y), and
<em>s</em> is a mutually exclusive state of the world observed at time <em>t</em>. When the regime vector is not supplied by the user, then a two-state
regime series is estimated via random forest.</p>
    </div>

    <pre class="usage"><span class='fu'>RVAR</span><span class='op'>(</span>
  <span class='va'>data</span>,
  horizon <span class='op'>=</span> <span class='fl'>10</span>,
  freq <span class='op'>=</span> <span class='st'>"month"</span>,
  type <span class='op'>=</span> <span class='st'>"const"</span>,
  p <span class='op'>=</span> <span class='fl'>1</span>,
  lag.ic <span class='op'>=</span> <span class='cn'>NULL</span>,
  lag.max <span class='op'>=</span> <span class='cn'>NULL</span>,
  regime <span class='op'>=</span> <span class='cn'>NULL</span>,
  regime.method <span class='op'>=</span> <span class='st'>"rf"</span>,
  regime.n <span class='op'>=</span> <span class='fl'>2</span>,
  structure <span class='op'>=</span> <span class='st'>"short"</span>,
  instrument <span class='op'>=</span> <span class='cn'>NULL</span>,
  instrumented <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>data.frame, matrix, ts, xts, zoo: Endogenous regressors</p></td>
    </tr>
    <tr>
      <th>horizon</th>
      <td><p>int: forecast horizons</p></td>
    </tr>
    <tr>
      <th>freq</th>
      <td><p>string: frequency of data ('day', 'week', 'month', 'quarter', or 'year')</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>string: type of deterministic terms to add ('none', 'const', 'trend', or 'both')</p></td>
    </tr>
    <tr>
      <th>p</th>
      <td><p>int: lags</p></td>
    </tr>
    <tr>
      <th>lag.ic</th>
      <td><p>string: information criterion to choose the optimal number of lags ('AIC' or 'BIC')</p></td>
    </tr>
    <tr>
      <th>lag.max</th>
      <td><p>int: maximum number of lags to test in lag selection</p></td>
    </tr>
    <tr>
      <th>regime</th>
      <td><p>string: name or regime assignment vector in the design matrix (data)</p></td>
    </tr>
    <tr>
      <th>regime.method</th>
      <td><p>string: regime assignment technique ('rf', 'kmeans', 'EM', or 'BP')</p></td>
    </tr>
    <tr>
      <th>regime.n</th>
      <td><p>int: number of regimes to estimate (applies to kmeans and EM)</p></td>
    </tr>
    <tr>
      <th>structure</th>
      <td><p>string: type of structural identification strategy to use in model analysis (NA, 'short', 'IV', or 'IV-short')</p></td>
    </tr>
    <tr>
      <th>instrument</th>
      <td><p>string: name of instrumental variable contained in the data matrix</p></td>
    </tr>
    <tr>
      <th>instrumented</th>
      <td><p>string: name of variable to be instrumented in IV and IV-short procedure; default is the first non-date variable in data</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>List of lists, where each regime is a list with items:</p><ol>
<li><p>data: data.frame with endogenous variables and 'date' column.</p></li>
<li><p>model: list with data.frame of model coefficients (in psuedo-companion form), data.frame of coefficient standard errors, integer of lags p, integer of horizons, string of frequency, string of deterministic term type, numeric of log-likelihood, regime indicator</p></li>
<li><p>forecasts: list of data.frames per horizon; data.frame with column for date (day the forecast was made), forecast.date (the date being forecasted), target (variable forecasted), and forecast</p></li>
<li><p>residuals: list of data.frames per horizon; data.frame of residuals</p></li>
<li><p>structure: string denoting which structural identification strategy will be used in analysis  (or NA)</p></li>
<li><p>instrument: data.frame with 'date' column and 'instrument' column (or NULL)</p></li>
<li><p>instrumented: string denoting which column will be instrumted in 'IV' and 'IV-short' strategies (or NULL)</p></li>
</ol>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The regime-dependent VAR is a generalization of the popular threshold VAR - which trades off estimating a threshold value for an
endogenous variable for accepting an exogenous regime that can be based on information from inside or outside of the system, with or without parametric
assumptions, and with or without timing restrictions. Moreover, the RVAR may be extended to include structural shocks, including the use of instrumental
variables.</p>
<p><strong>State dependence.</strong> The RVAR augments the traditional VAR by allowing state-dependence in the coefficient matrix. The RVAR differs from the more common threshold VAR (TVAR), due
to the fact that states are exegonesouly determined. As a result, the states (i.e. regimes) do not need to be based on information inside the model, moreover, regimes can be
determined by any process the user determines best fits their needs. For example, regimes based on NBER dated recessions and expansions are based on a judgmental process
considering hundreds of series, potentially none of which are in the VAR being modeled. Alternatively, a user may use unsupervised machine learning to assign regimes - this is
the process the <code><a href='regimes.html'>sovereign::regimes</a></code> function facilitates.</p>
<p><strong>Structural shocks.</strong> See Sims (1980) for details regarding the baseline vector-autoregression (VAR) model. The VAR may be augmented to become a structural VAR (SVAR) with one of three different structural identification strategies:</p><ol>
<li><p>short-term impact restrictions via Cholesky decomposition, see Christiano et al (1999) for details <strong>(structure = 'short')</strong></p></li>
<li><p>external instrument identification, i.e. a Proxy-SVAR strategy, see Mertens and Ravn (2013) for details <strong>(structure = 'IV')</strong></p></li>
<li><p>or a combination of short-term and IV identification via Lunsford (2015) <strong>(structure = 'IV-short')</strong></p></li>
</ol>

<p>Note that including structure does not change the estimation of model coefficients or forecasts, but does change impulse response functions, forecast error variance decomposition,
and historical decompositions. Historical decompositions will not be available for models using the 'IV' structure. Additionally note that only one instrument may be used in this
estimation routine.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ol>
<li><p>Christiano, Lawrence, Martin Eichenbaum, and Charles Evans "<a href='https://www.sciencedirect.com/science/article/pii/S1574004899010058'>Monetary policy shocks: What have we learned and to what end?</a>" Handbook of Macroeconomics, Vol 1, Part A, 1999.</p></li>
<li><p>Lunsford, Kurt "<a href='https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2699452#'>Identifying Structural VARs with a Proxy Variable and a Test for a Weak Proxy</a>" 2015.</p></li>
<li><p>Mertens, Karel and Morten Ravn "<a href='https://www.aeaweb.org/articles?id=10.1257/aer.103.4.1212'>The Dynamic Effects of Personal and Corporate Income Tax Changes in the United States</a>" 2013.</p></li>
<li><p>Sims, Christopher "<a href='https://www.jstor.org/stable/1912017'>Macroeconomics and Reality</a>" 1980.</p></li>
</ol>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='VAR.html'>VAR()</a></code></p>
<p><code>RVAR()</code></p>
<p><code><a href='IRF.html'>IRF()</a></code></p>
<p><code><a href='FEVD.html'>FEVD()</a></code></p>
<p><code><a href='HD.html'>HD()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>

 <span class='co'># simple time series</span>
 <span class='va'>AA</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>100</span><span class='op'>)</span>
 <span class='va'>BB</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>100</span><span class='op'>)</span>
 <span class='va'>CC</span> <span class='op'>=</span> <span class='va'>AA</span> <span class='op'>+</span> <span class='va'>BB</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>100</span><span class='op'>)</span>
 <span class='va'>date</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.Date.html'>seq.Date</a></span><span class='op'>(</span>from <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='st'>'2000-01-01'</span><span class='op'>)</span>, by <span class='op'>=</span> <span class='st'>'month'</span>, length.out <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>
 <span class='va'>Data</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>date <span class='op'>=</span> <span class='va'>date</span>, <span class='va'>AA</span>, <span class='va'>BB</span>, <span class='va'>CC</span><span class='op'>)</span>
 <span class='va'>Data</span> <span class='op'>=</span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>Data</span>, reg <span class='op'>=</span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>AA</span> <span class='op'>&gt;</span> <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>AA</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>

 <span class='co'># estimate regime-dependent VAR</span>
  <span class='va'>rvar</span> <span class='op'>=</span>
    <span class='fu'>sovereign</span><span class='fu'>::</span><span class='fu'>RVAR</span><span class='op'>(</span>
      data <span class='op'>=</span> <span class='va'>Data</span>,
      horizon <span class='op'>=</span> <span class='fl'>10</span>,
      freq <span class='op'>=</span> <span class='st'>'month'</span>,
      regime.method <span class='op'>=</span> <span class='st'>'rf'</span>,
      regime.n <span class='op'>=</span> <span class='fl'>2</span>,
      lag.ic <span class='op'>=</span> <span class='st'>'BIC'</span>,
      lag.max <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: NAs introduced by coercion</span></div><div class='output co'>#&gt; <span class='warning'>Warning: NAs introduced by coercion</span></div><div class='output co'>#&gt; <span class='warning'>Warning: NAs introduced by coercion</span></div><div class='output co'>#&gt; <span class='warning'>Warning: NAs introduced by coercion</span></div><div class='input'>
 <span class='co'># impulse response functions</span>
 <span class='va'>rvar.irf</span> <span class='op'>=</span> <span class='fu'>sovereign</span><span class='fu'>::</span><span class='fu'><a href='rvar_irf.html'>rvar_irf</a></span><span class='op'>(</span><span class='va'>rvar</span><span class='op'>)</span>

 <span class='co'># forecast error variance decomposition</span>
 <span class='va'>rvar.fevd</span> <span class='op'>=</span> <span class='fu'>sovereign</span><span class='fu'>::</span><span class='fu'><a href='rvar_fevd.html'>rvar_fevd</a></span><span class='op'>(</span><span class='va'>rvar</span><span class='op'>)</span>

 <span class='co'># historical shock decomposition</span>
 <span class='va'>rvar.hd</span> <span class='op'>=</span> <span class='fu'>sovereign</span><span class='fu'>::</span><span class='fu'><a href='rvar_hd.html'>rvar_hd</a></span><span class='op'>(</span><span class='va'>rvar</span><span class='op'>)</span>

<span class='co'># }</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tyler J. Pike.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '4a0d0a15b437a7d39695290aace8b645',
    indexName: 'sovereign',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


